<!DOCTYPE html>
<html>
<head>
<title>Tranfusion Mapping</title>

<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>

<style>
html{color:#000;background:#FFF}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:normal}li{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}q:before,q:after{content:''}abbr,acronym{border:0;font-variant:normal}sup{vertical-align:text-top}sub{vertical-align:text-bottom}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit}input,textarea,select{font-size:100%}legend{color:#000}
window{
	height:100%;
}
body,html,#content{
	font-family:Arial;
	height:100%;
	width:100%;
}
#content{
	position:absolute;
	z-index:1;
	overflow:hidden;
}
#navigation{
	position:absolute;
	top:0px;
	z-index:10;
	width:100%;
	background-color:#AAA;
	border-bottom:solid #EEA41F 4px;
}
#navigation ul{border:none;padding:0px;margin:0px;}
#navigation li{
	padding:8px 15px;
	margin:0px;
	list-style:none;
	
	font-size:14px;
	font-weight:bold;
	color:#FFF;
	
	display:inline-block;
	cursor:pointer;
}
#navigation li.active{
	background-color:#EEA41F;
}
#navigation li:hover{
	background-color:#333;
}
#map-container,#data-container,#login-container{
	width:100%;
	height:100%;
	margin-top:35px
}
.grad-grey{
	background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#CCC), to(#222));
	background-image: -webkit-linear-gradient(top, #CCC, #222); 
	background-image: -moz-linear-gradient(top, #CCC, #222);
	background-image: -ms-linear-gradient(top, #CCC, #222);
	background-image: -o-linear-gradient(top, #CCC, #222);
}
</style>

</head>
<body>
<div id="navigation" class="">
	<ul>
		<li id="map" class="active">Map</li><li id="data">Data Sheet</li><li id="login">Login/Logout</li>
	</ul>	
</div>
<div id="content">
	<div class="inner" id="map-container"></div>
	<div class="inner" id="data-container" style="display:none;">FORM</div>
	<div class="inner" id="login-container" style="display:none;">Login/Logout</div>
</div>

<script>
$(document).ready(function(){
	var navigation = {
		$navs: null,
		$contents: null,
		init:function(){
			var obj = this;
			obj.$navs = $('#navigation li');
			obj.$contents = $('#content .inner');
			obj.$navs.click(function(){
				var $local = $(this);
				var $container = $('#'+$(this).attr('id')+"-container").show();
				obj.setActive.call(obj,function(){
					$local.addClass('active');
					$container.show()
				});
			});
		},
		setActive:function(callback){
			this.$navs.removeClass('active');
			this.$contents.hide();
			callback();
		}
	}
	navigation.init();

	var city = new google.maps.LatLng(42.8576698303223,-106.267807006836);
	//var city = new google.maps.LatLng(-25, 133);
	
	map = new google.maps.Map(document.getElementById('map-container'), {
	  center: city,
	  zoom: 15,
	  mapTypeId: google.maps.MapTypeId.ROADMAP,
	  zoomControlOptions: {style: google.maps.ZoomControlStyle.SMALL},
	  streetViewControl: false
	});
	
	layer = new google.maps.FusionTablesLayer({
	  query: {
	    select: 'geometry',
	    from: '2088364'
	  },
	  suppressInfoWindows: true,
	  styles: [{
	    polygonOptions: {
	      fillColor: "#00FF00",
	      fillOpacity: 0.3
	    }
	  }]
	});
	layer.setMap(map);
	
	
	
	google.maps.event.addListener(layer, 'click', function(e) {
		//alert(e.row['Distance'].value);
		$('#key-data').html('');
		for(var data in e.row){
			var str = data + ': ' + e.row[data].value + '<br/>';
			$('#key-data').append(str);
		}
	});
	
	$('#key').draggable({handle:'#title'});
	
});
</script>

</body>
</html>